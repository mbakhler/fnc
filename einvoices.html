<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<script src="js/knockout-3.2.0.js"></script>
</head>
<body>
	<div class="container-fluid" id="eInvApp" role="main" style="" data-bind="with: fnc.eInvoicesApp">

		<!-- ko if: selectedItem() == null -->
		<div class="panel panel-default" style="margin-bottom:0;">
			<div class="panel-heading"><span style="color:#337ab7;font-weight:bold;">Manage eInvoices</span></div>
			<div class="panel-body">
				<div class="row">
					<div class="col-xs-3"><input type="text" class="form-control input-sm" placeholder="Search..." data-bind="textInput: listSearchFilter"></div>

					<!--<div class="col-xs-3 col-xs-offset-6">
						<div class="checkbox" style="margin:0; text-align:right;">
							<label style="">
								<input type="checkbox" style="margin-top: 2px;" data-bind="checked: showDeleted">Show Deleted
							</label>
						</div>
					</div>-->

				</div>
			</div>
			<div class="row">
				<div class="col-xs-10" style="padding-right:0px;">
					<table id="tblEInvListHead" class="cm-table table table-condensed table-bordered " style="margin-bottom:0px;">
						<thead style="background-color: #f5f5f5;">
							<tr>
								<th class="col-w-b30-1   text-overflow-ellipsis"></th>
								<th data-bind="with: listHeaders[0]" class="col-w-b30-8   text-overflow-ellipsis"><span id="einv_list" class="sort-alpha" style="cursor:pointer;" data-bind="text: $data.title, click: sortListItems">COMPANY</span><span class="glyphicon glyphicon-arrow-up" aria-hidden="true" data-bind="visible: $data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span><span class="glyphicon glyphicon-arrow-down" aria-hidden="true" data-bind="visible: !$data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span></th>
								<th data-bind="with: listHeaders[1]" class="col-w-b30-8"><span id="einv_list" class="sort-alpha" style="cursor:pointer;" data-bind="text: $data.title, click: sortListItems">LOCATION</span><span class="glyphicon glyphicon-arrow-up" aria-hidden="true" data-bind="visible: $data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span><span class="glyphicon glyphicon-arrow-down" aria-hidden="true" data-bind="visible: !$data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span></th>
								<th data-bind="with: listHeaders[2]" class="col-w-b30-3"><span id="einv_list" class="sort-alpha" style="cursor:pointer;" data-bind="text: $data.title, click: sortListItems">PO(s)</span><span class="glyphicon glyphicon-arrow-up" aria-hidden="true" data-bind="visible: $data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span><span class="glyphicon glyphicon-arrow-down" aria-hidden="true" data-bind="visible: !$data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span></th>
								<th data-bind="with: listHeaders[3]" class="col-w-b30-3"><span id="einv_list" class="sort-alpha" style="cursor:pointer;" data-bind="text: $data.title, click: sortListItems">INVOICE #</span><span class="glyphicon glyphicon-arrow-up" aria-hidden="true" data-bind="visible: $data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span><span class="glyphicon glyphicon-arrow-down" aria-hidden="true" data-bind="visible: !$data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span></th>
								<th data-bind="with: listHeaders[4]" class="col-w-b30-3"><span id="einv_list" class="sort-alpha" style="cursor:pointer;" data-bind="text: $data.title, click: sortListItems">DATE</span><span class="glyphicon glyphicon-arrow-up" aria-hidden="true" data-bind="visible: $data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span><span class="glyphicon glyphicon-arrow-down" aria-hidden="true" data-bind="visible: !$data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span></th>
								<th data-bind="with: listHeaders[5]" class="col-w-b30-3" style="text-align:right;"><span id="einv_list" style="cursor:pointer;" data-bind="text: $data.title, click: sortListItems">PO TOTAL</span><span class="glyphicon glyphicon-arrow-up" aria-hidden="true" data-bind="visible: $data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span><span class="glyphicon glyphicon-arrow-down" aria-hidden="true" data-bind="visible: !$data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span></th>
								<th data-bind="with: listHeaders[6]" class="text-overflow-ellipsis"><span id="einv_list" class="sort-alpha" style="cursor:pointer;" data-bind="text: $data.title, click: sortListItems">ACCEPTED</span><span class="glyphicon glyphicon-arrow-up" aria-hidden="true" data-bind="visible: $data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span><span class="glyphicon glyphicon-arrow-down" aria-hidden="true" data-bind="visible: !$data.asc() && $data.title==fnc.eInvoicesApp.activeSort().title"></span></th>
								<th style="width:17px;"></th>
							</tr>
						</thead>
					</table>
					<div id="tblEInvListBody" style="overflow-y: scroll; ">
						<!-- ko if: filteredItems().length == 0 -->
						<h4 style="text-align:center;">No records found</h4>
						<!-- /ko -->
						<table id="" class="cm-table table table-condensed table-bordered table-hover " style="margin-bottom:0px; table-layout:fixed;">
							<tbody data-bind="foreach: paginated">
								<tr style="" data-bind="css: {'cm-einvoice-disabled-row' : RestoreButtonVisible()}">
									<td class="col-w-b30-1  text-overflow-ellipsis">
										<!--<input type="checkbox" data-bind="checked: Selected" />-->
										<button class="btn btn-xs btn-danger" style="padding:0;height:18px;vertical-align:top;" title="Delete" data-bind="click: onDeleteInvoiceClick, visible: DeleteButtonVisible()"><span class="glyphicon glyphicon-trash" style="margin-right:1px;"></span></button>
										<button class="btn btn-xs btn-warning" style="padding:0;height:18px;vertical-align:top;" title="Restore" data-bind="click: onRestoreInvoiceClick, visible: RestoreButtonVisible()"><span class="glyphicon glyphicon-export" style="margin-right:1px;"></span></button>
									</td>
									<td class="col-w-b30-8 text-overflow-ellipsis" style="" data-bind="text: Vendor"></td>
									<td class="col-w-b30-8" data-bind="text: Location"></td>
									<td class="col-w-b30-3 text-overflow-ellipsis" style="" data-bind="text: POList, attr: {title: POList}"></td>
									<td class="col-w-b30-3" style=""><a style="cursor:pointer;" data-bind="text: InvoiceNumber, click: onInvoiceLinkClick"></a></td>
									<td class="col-w-b30-3" data-bind="text: format2Date(InvoiceDate)"></td>
									<td class="col-w-b30-3" style="text-align: right;" data-bind="text: formatCurrency(Total)"></td>
									<td class="text-overflow-ellipsis" data-bind="text: FailMsg"></td>
								</tr>
							</tbody>
						</table>
					</div>

				</div>
				<div class="col-xs-2" style="padding-left:0px;">
					<div id="tblEInvListFilter" class="panel panel-default" style="margin-bottom:0px;">
						<div class="panel-heading" style="padding: 5px 25px; color: brown;">
							<span style="font-weight: bolder;">Filter</span>
						</div>
						<div class="panel-body">
							<!-- ko foreach: uniqueFailureTypes -->
							<div class="checkbox" data-bind="visible: Number(StatusCode) > -2">
								<label>
									<input type="checkbox" data-bind="checked: Selected"><span data-bind="text: FailMsg"></span>
								</label>
							</div>
							<!-- /ko -->
							<hr />
							<div class="checkbox" style="margin:0;">
								<label style="">
									<input type="checkbox" style="" data-bind="checked: fnc.eInvoicesApp.showDeleted">Show Deleted
								</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Table -->
			<!-- /Table -->
			<div class="panel-footer" style="margin-bottom:0;">
				<button class="btn btn-xs" style="width:26px;" data-bind="click: previous, enable: hasPrevious()"><span class="glyphicon glyphicon-chevron-left" style=""></span></button>
				<button class="btn btn-xs" style="width:26px;" data-bind="click: next, enable: hasNext()"><span class="glyphicon glyphicon-chevron-right" style=""></span></button>
				<!-- ko foreach: totalPagesHolder -->
				<a class="btn btn-xs btn-default" href="#" role="button" style="width:26px;" data-bind="click: $parent.pageController, style: {color: $parent.pageNumber() + 1 == $data ? '#fff' : '',	background: $parent.pageNumber() + 1 == $data ? '#7dc0ff' : '' }, visible: $index() == 0 || $index() == fnc.eInvoicesApp.totalPagesHolder().length - 1 || ($parent.pageNumber() - $index() > -5 && $parent.pageNumber() - $index() < 5)">
					<span class="current" data-bind="text: $data"></span>
				</a>
				<!-- /ko -->
			</div>

		</div>
		<!-- /ko -->

		<!-- ko if: selectedItem() != null -->
		<div class="panel panel-default">
			<div class="panel-heading" data-bind="with: selectedItem">
				<div class="row">
					<!-- Left Section -->
					<div class="col-xs-4">
						<div class="well well-sm" style="border: 1px solid lightGray; margin-top: 5px; margin-right:-13px; padding: 5px; border-radius: 5px;  margin-bottom:0;/*height:85px;*/">
							<div class="row">
								<div class="col-xs-12">
									<div class="row">
										<div class="col-xs-3" style="padding-right:5px;"><label style="float:right; font-size:10px;">ACCOUNT#:</label></div>
										<div class="col-xs-9" style="padding-left:0;">
											<h6 style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 240px; margin-top:3px; margin-bottom: 0; font-weight:bold;" data-bind="text: accountNum()"></h6>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-3" style="padding-right:5px;"><label style="float:right; font-size:10px;">LOCATION:</label></div>
										<div class="col-xs-9" style="padding-left:0;">
											<!--<h6 style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 240px; margin-top:3px; margin-bottom: 0; font-weight:bold;" data-bind="text: Location"></h6>-->
											<select class="input-medium input-nopadding" style="float:left;width:auto;" data-bind="options: fnc.eInvoicesApp.filterAvailableLocations, optionsText: function(it){return it.LocationName}, optionsValue: 'LocationId', value: selectedOrgId, optionsCaption: 'Select location...'"></select>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-3" style="padding-right:5px;"><label style="float:right; font-size:10px;">VENDOR:</label></div>
										<div class="col-xs-9" style="padding-left:0;">
											<h6 style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 240px; margin-top:3px; margin-bottom: 0; font-weight:bold;" data-bind="text: Vendor"></h6>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-3" style="padding-right:5px;"><label style="float:right; font-size:10px;">PO(s):</label><button class="btn btn-xs btn-warning" style="float:right; padding: 0px; height: 18px; margin-right: 5px;" data-bind="click: showAddPO"><span class="glyphicon glyphicon-link"></span></button></div>
										<div class="col-xs-9" style="padding-left:0;">
											<ul style="margin:0;padding:0;" data-bind="foreach: includedPOList">
												<li style="display: inline;">
													<div class="cm-h-li-item" style="">
														<span data-bind="text: $data"></span>
														<!--<input class="btn btn-danger btn-xs validated-field" value="X" style="float:right;width:12px;height:16px;line-height:16px;padding:0;" data-bind="click: fnc.eInvoicesApp.removePOFromInvoice">-->
													</div>
												</li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- xxx Section -->
					<div class="col-xs-8">
						<div class="row">
							<!-- Middle Section -->
							<div class="col-xs-9">
								<div class="well well-sm" style="border: 1px solid lightGray; margin-top: 5px;  margin-left: -15px; margin-right:-15px; padding: 5px; border-radius: 5px; height:85px; margin-bottom:0;">
									<div class="row">
										<div class="col-xs-3" style="padding-right:0;padding-left:25px;">
											<div class="row">
												<div class="col-xs-5" style="padding: 0px;"><label style="margin-top:0px; margin-bottom:0px; float:right; font-size:10px;">INV.#:</label></div>
												<div class="col-xs-7" style="padding-left: 5px;"><input type="text" id="invoiceNumber" class="form-control input-sm validated-field" style="padding:0; " readonly data-bind="value: InvoiceNumber" /></div>
											</div>
											<div class="row">
												<div class="col-xs-5" style="padding: 0px;"><label style="margin-top:0px; margin-bottom:0px; float:right; font-size:10px;">INV.DATE:</label></div>
												<div class="col-xs-7" style="padding-left: 5px;"><input type="text" id="invoiceDate" class="form-control input-sm validated-field" style="padding:0; " readonly data-bind="value: format2Date(InvoiceDate)" /></div>
											</div>
										</div>
										<div class="col-xs-3">
											<div class="row">
												<div class="col-xs-6" style="padding: 0px;"><label style="margin-top:0px; margin-bottom:0px; float:right; font-size:10px;">INV.TOTAL:</label></div>
												<div class="col-xs-6" style="padding-left: 5px;"><input type="text" id="invoiceGross" class="form-control input-sm validated-field" style="padding:0;  text-align:right;" readonly data-bind="value: formatCurrency(gross())" /></div>
											</div>
											<div class="row">
												<div class="col-xs-6" style="padding: 0px;"><label style="margin-top:0px; margin-bottom:0px; float:right; font-size:10px;">DISCOUNT:</label></div>
												<div class="col-xs-6" style="padding-left: 5px;"><input type="text" id="invoiceDiscount" class="form-control input-sm validated-field" style="padding:0;  text-align:right;" readonly data-bind="value: formatCurrency(discount())" /></div>
											</div>
											<div class="row"><div class="col-xs-12">&nbsp;</div></div>
											<div class="row">
												<div class="col-xs-6" style="padding: 0px;"><label style="margin-top:0px; margin-bottom:0px; float:right; font-size:10px;">NET:</label></div>
												<div class="col-xs-6" style="padding-left: 5px;"><input type="text" class="form-control input-sm" style="padding:0;  text-align:right;" readonly data-bind="value: formatCurrency(computedNet())" /></div>
											</div>
										</div>
										<div class="col-xs-3">
											<div class="row">
												<div class="col-xs-6" style="padding: 0px;"><label style="margin-top:0px; float:right; font-size:10px;">LINE TOTAL:</label></div>
												<div class="col-xs-6" style="padding-left: 5px;"><input type="text" class="form-control input-sm" style="padding:0; text-align:right;" readonly data-bind="textInput: formatCurrency(lineTotal())" /></div>
											</div>
											<div class="row"><div class="col-xs-12">&nbsp;</div></div>
											<div class="row"><div class="col-xs-12">&nbsp;</div></div>
											<div class="row">
												<div class="col-xs-6" style="padding: 0px;">
													<label style="margin-top:0px; margin-bottom:0px; float:right; font-size:10px;">TOTAL:</label>
												</div>
												<div class="col-xs-6" style="padding-left: 5px;">
													<input type="text" class="form-control input-sm" style="padding:0; text-align:right;" readonly data-bind="value: formatCurrency(computedTotal())" />
												</div>
											</div>

										</div>
										<div class="col-xs-3">
											<div class="row">
												<div class="col-xs-6" style="padding: 0px;"><label style="margin-top:0px; float:right; font-size:10px;">DEPOSIT/CR:</label></div>
												<div class="col-xs-6" style="padding-left:5px;"><input id="invoiceDiscount" class="form-control input-sm validated-field" style="padding:0; text-align:right;" readonly="" data-bind="textInput: formatCurrency(depositOrCredit())" type="text"></div>
											</div>
											<div class="row">
												<div class="col-xs-6" style="padding:0;"><label style="margin-top:0px; float:right; font-size:10px;">DISCOUNT:</label></div>
												<div class="col-xs-6" style="padding-left:5px;"><input id="invoiceDiscount" class="form-control input-sm validated-field" style="padding:0; text-align:right;" readonly="" data-bind="textInput: formatCurrency(discountComputed())" type="text"></div>
											</div>
											<div class="row">
												<div class="col-xs-6" style="padding: 0px;"><label style="margin-top:0px; margin-bottom:0px; float:right; font-size:10px;">TAX:</label></div>
												<div class="col-xs-6" style="padding-left: 5px;"><input type="text" id="invoiceTax" class="form-control input-sm validated-field" style="padding:0;  text-align:right;" readonly data-bind="value: formatCurrency(tax())" /></div>
											</div>
											<div class="row">
												<div class="col-xs-6" style="padding: 0px;"><label style="margin-top:0px; margin-bottom:0px; float:right; font-size:10px;">FREIGHT:</label></div>
												<div class="col-xs-6" style="padding-left: 5px;"><input type="text" id="invoiceFreight" class="form-control input-sm validated-field" style="padding:0;  text-align:right;" readonly data-bind="value: formatCurrency(freight())" /></div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- Right Section -->
							<div class="col-xs-3">
								<div class="well well-sm" style="border: 1px solid lightGray; margin-top: 5px; margin-left: -13px; padding: 5px; border-radius: 5px; height:85px; margin-bottom:0;">
									<div class="row" style="margin-bottom:10px;">
										<div class="col-xs-6" style="height:28px;padding-right:0;">
											<button id="" class="btn btn-primary btn-sm  validated-field" style="width:100%;" onclick="" data-bind="click: fnc.eInvoicesApp.goBack2eInvoicesList"><span class=" glyphicon glyphicon-arrow-left"></span>&nbsp;&nbsp;Back</button>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12">
											<div class="btn-group" style="width:100%">
												<button id="" class="btn btn-warning btn-sm  validated-field" style="width:50%;" data-bind="click: validateInvoiceClick"><span>Validate</span>&nbsp;&nbsp;<span class="glyphicon glyphicon-repeat" aria-hidden="true"></span></button>
												<button id="" class="btn btn-primary btn-sm  validated-field" style="width:50%;" data-bind="click: processInvoiceClick, enable: (isValid() || status() == '99')"><span>Process</span>&nbsp;&nbsp;<span class="glyphicon glyphicon-play-circle" aria-hidden="true"></span></button>
											</div>
										</div>
									</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
			
			<div class="panel-body">
				<div class="row">
					<div class="col-xs-3"><input type="text" class="form-control input-sm" placeholder="Search..." data-bind="textInput: listSearchFilter2"></div>
					<div class="col-xs-9" data-bind="visible: !selectedItem().isValid()">
						<!-- ko if: selectedItem().status() != '99' -->
						<div class="pull-right" style="padding: 2px; color: rgb(217, 83, 79);"><span class="cm-label" data-bind="text: selectedItem().msg()"></span><span class="glyphicon glyphicon-exclamation-sign"></span></div>
						<!-- /ko -->
						<!-- ko if: selectedItem().status() == '99' -->
						<div class="pull-right" style="padding: 2px; color: #F9A507;"><span class="cm-label" data-bind="text: selectedItem().msg()"></span><span class="glyphicon glyphicon-exclamation-sign"></span></div>
						<!-- /ko -->
					</div>
				</div>
				<!--<pre data-bind="text: ko.toJSON($data, null, 2)"></pre>-->
			</div>

			<table class="cm-table table table-bordered table-condensed">
				<thead style="background-color:#f5f5f5;">
					<tr>
						<th class="col-w-b30-3" rowspan="2">CODE</th>
						<th class="col-w-b30-3" rowspan="2">ITEM ID</th>
						<th class="col-w-b30-3" colspan="3" style="text-align:center;">QUANTITY</th>
						<th class="col-w-b30-2" style="border-bottom:none !important;">ORDER</th>
						<th class="text-overflow-ellipsis" rowspan="2">ITEM</th>
						<th class="col-w-b30-2" style="text-align:right;border-bottom:none !important;">PRICE</th>
						<th class="col-w-b30-3" rowspan="2" style="text-align:right;">PRICE</th>
						<th class="col-w-b30-3" rowspan="2" style="text-align:right;">DEPOSIT</th>
						<th class="col-w-b30-3" rowspan="2" style="text-align:right;">CREDIT</th>
						<th class="col-w-b30-3" rowspan="2" style="text-align:right;">TOTAL</th>
						<th class="col-w-scroll-17" rowspan="2"></th>
					</tr>
					<tr>
						<th class="col-w-b30-3" style="text-align:right;border-bottom: 0;">ORDER</th>
						<th class="col-w-b30-3" style="text-align:right;border-bottom: 0;">BACKORDER</th>
						<th class="col-w-b30-3" style="text-align:right;border-bottom: 0;">SHIP</th>
						<th class="col-w-b30-2" style="border-bottom:0;border-top:none !important;">UNIT</th>
						<th class="col-w-b30-2" style="text-align:right;border-bottom:0;border-top:none !important;">UNITS</th>
					</tr>
				</thead>
			</table>
			<div id="tblEInvItemsBody" style="overflow-y: scroll; ">
				<table class="cm-table table table-bordered table-condensed table-hover" style="margin-bottom:0px; table-layout:fixed;">
					<tbody data-bind="foreach: invoiceFilteredItems">
						<tr data-bind="css: {ItemIdZero: ItemId == '0' || VendItemCode == ''}">
							<!--<td class="col-w-b30-3" style="padding:1px !important;"><input type="text" class="cm-inputcell4" data-bind="value: VendItemCode" /></td>-->
							<!--<td class="col-w-b30-3" style="padding:1px !important;"><input type="text" class="cm-inputcell4" data-bind="value: ItemId" /></td>-->
							<td class="col-w-b30-3" data-bind="text: VendItemCode"></td>
							<td class="col-w-b30-3" data-bind="text: ItemId"></td>
							<td class="col-w-b30-3" style="text-align:right;" data-bind="text: formatToFixed0(OrdQuantity, 2)"></td>
							<td class="col-w-b30-3" style="text-align:right;" data-bind="text: formatToFixed0(BackOrdQuantity, 2)"></td>
							<td class="col-w-b30-3" style="text-align:right;" data-bind="text: formatToFixed0(ShipQuantity, 2)"></td>
							<td class="col-w-b30-2" data-bind="text: Unit"></td>
							<td class="text-overflow-ellipsis" data-bind="text: Description"></td>
							<td class="col-w-b30-2" style="text-align:right;" data-bind="text: formatToFixed0(TotalPriceUnits, 2)"></td>
							<td class="col-w-b30-3" style="text-align:right;" data-bind="text: formatCurrency(Price)"></td>
							<td class="col-w-b30-3" style="text-align:right;" data-bind="text: formatCurrency(DepositAmt)"></td>
							<td class="col-w-b30-3" style="text-align:right;" data-bind="text: formatCurrency(CreditAmt)"></td>
							<td class="col-w-b30-3" style="text-align:right;" data-bind="text: formatCurrency(TotalAmt)"></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<!-- /ko -->

		<!--<pre data-bind="text: ko.toJSON($data, null, 2)"></pre>-->

		<!-- Confirm Delete Invoice Item -->
		<div class="modal draggable fade" id="modConfirmDelInvoice" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title" id="myModalLabel">CONFIRM DELETE</h4>
					</div>
					<div class="modal-body">
						<!-- ko if: selectedForDeleteItem() != null -->
						<div data-bind="with: selectedForDeleteItem">
							<p><span data-bind="text: InvoiceNumber"></span> will be deleted from the list.</p>
						</div>
						<!--<pre data-bind="text: ko.toJSON(selectedForDeleteItem(), null, 2)"></pre>-->
						<!-- /ko -->
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-bind="click: cancelDeleteInvoiceClick">Cancel</button>
						<button type="button" class="btn btn-default" data-bind="click: deleteInvoiceClick">Delete</button>
					</div>
				</div>
			</div>
		</div>
		<!-- /Confirm Delete Invoice Item -->

		<!-- Add PO -->
		<div class="modal draggable fade" id="modAddPO" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">LINK PO</h4>
					</div>
					<div class="modal-second-header" data-bind="">
						<button type="button" class="btn btn-primary" data-bind="click: createPOClick">Create PO</button>
						<button type="button" class="btn btn-primary" data-bind="click: submitAddPO, visible: addPONewItems().length">Link</button>
					</div>
					<div class="modal-body" style="max-height: 400px;overflow:auto;">
						<!--<pre data-bind="text: ko.toJSON(addPONewItems().length, null, 2)"></pre>-->
						<h4 data-bind="visible: addPONewItems().length == 0">No relevant Purchase Orders found.</h4>
						<table class="cm-table table table-condensed table-hover" data-bind="visible: addPONewItems().length">
							<thead>
								<tr style="font-size:10px; font-weight:bolder;">
									<td class="col-w-b30-1"></td>
									<td class="col-w-b30-4">PO NUMBER</td>
									<td class="col-w-b30-4">DELIVERY DATE</td>
									<td class="col-w-b30-4" style="text-align:right;">ORDER TOTAL</td>
								</tr>
							</thead>
							<tbody data-bind="foreach: addPONewItems" style="">
								<tr style="">
									<td style=""><input type="checkbox" data-bind="checked: Selected" style="" /></td>
									<td style="vertical-align:middle;"><a data-bind="text: PONumber, click: onPOLinkClick" style="cursor:pointer;"></a></td>
									<td style="vertical-align:middle;" data-bind="text: format2Date(DeliveryDate)"></td>
									<td style="vertical-align:middle;text-align:right;" data-bind="text: formatCurrency(POTotal)"></td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="modal-footer" data-bind="">
						<button type="button" class="btn btn-primary" data-bind="click: createPOClick">Create PO</button>
						<button type="button" class="btn btn-primary" data-bind="click: submitAddPO, visible: addPONewItems().length">Link</button>
					</div>
				</div>
			</div>
		</div>
		<!-- /Add PO -->

		<!-- PO Items -->
		<div class="modal draggable fade" id="modPOItems" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog" style="width:1100px; ">
				<div class="modal-content" style="height:570px;" data-bind="">
					<form id="frmPOItems">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">PO # <span data-bind="text: selectedPONumber()"></span>; <span data-bind="text: selectedPOAllItems().length"></span> item(s); Total: <span data-bind="text: formatCurrency(selectedPOTotal())"></span>;</h4>
						</div>
						<div class="modal-body">
							<div class="row" style="margin:0;">
								<div class="col-xs-12 " style="padding-left:2px; padding-right:2px;">
									<input style="height:24px;" type="text" class="form-control input-sm" id="" placeholder="Search for ..." data-bind="textinput: selectedPOItemSearch" />
									<div id="itemSearchResult" class="" style="width:100%;">
										<div class="row" style="margin:0; display:block; overflow-x:hidden;">
											<table class="cm-table table table-condensed " style="margin:0;font-size:12px;">
												<thead>
													<tr>
														<th style="padding-left: 0;">ITEM</th>
														<th class="col-w-b30-2" style="text-align:center;padding-left: 0;">ITEM ID</th>
														<th class="col-w-b30-5" style="text-align:center;">BRAND</th>
														<th class="col-w-b30-3" style="text-align:center;padding-left: 0;">UOM</th>
														<th class="col-w-b30-2" style="text-align:center;padding-left: 0;">QTY</th>
														<th class="col-w-b30-2" style="text-align:center;padding-left: 0;">UNIT</th>
														<th class="col-w-b30-2" style="text-align:center;">CWT</th>
														<th class="col-w-b30-3" style="text-align:right;padding-right: 0;">PRICE</th>
														<th class="col-w-b30-3" style="text-align:right;padding-right: 0;">EXT.</th>
														<th style="width:17px;padding:0;"></th>
													</tr>
												</thead>
											</table>
										</div>
										<div class="row" style="height:420px; overflow-y:scroll; margin-left:0; margin-right:0;">
											<table class="cm-table table table-condensed table-hover">
												<tbody data-bind="foreach: selectedPOFilteredItems">
													<tr>
														<td style="padding:0 !important;" data-bind="text: Description"></td>
														<td class="col-w-b30-2" style="padding:0 !important;text-align:center;" data-bind="text: ItemId"></td>
														<td class="col-w-b30-5" style="padding:0 !important;text-align:center;" data-bind="text: Brand"></td>
														<td class="col-w-b30-3" style="padding:0 !important;text-align:center;" data-bind="text: UOM"></td>
														<td class="col-w-b30-2" style="padding:0 !important;text-align:center;" data-bind="text: formatToFixed(Quantity, 0)"></td>
														<td class="col-w-b30-2" style="padding:0 !important;text-align:center;" data-bind="text: Unit"></td>
														<td class="col-w-b30-2" style="padding:0 !important;text-align:center;" data-bind="text: formatToFixed(CWT, 0)"></td>
														<td class="col-w-b30-3" style="padding:0 !important;text-align:right;" data-bind="text: formatCurrency(UnitPrice)"></td>
														<td class="col-w-b30-3" style="padding:0 !important;text-align:right;" data-bind="text: formatCurrency(Ext)"></td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
							<!--<pre data-bind="text: ko.toJSON(vendorSearchList(), null, 2)"></pre>-->
						</div>
					</form>
				</div>
			</div>
		</div>
		<!-- /PO Items -->

		<!-- Confirm Remove PO From Invoice -->
		<div class="modal draggable fade" id="modConfirmRemovePO" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">CONFIRM REMOVE PO</h4>
					</div>
					<div class="modal-body">
						<p>PO&nbsp;<span data-bind="text: selectedForRemovePO()"></span>&nbsp;will be removed from the invoice.</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-bind="click: cancelRemovePO">Cancel</button>
						<button type="button" class="btn btn-default" data-bind="click: submitRemovePO">OK</button>
					</div>
				</div>
			</div>
		</div>
		<!-- /Confirm Remove PO From Invoice -->
	
		<!-- Compare PO Items -->
		<div id="modCompareInvoicePOItems" class="modal draggable fade" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel">
			<div class="modal-dialog" role="document" style="width:1200px;">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="gridSystemModalLabel">
							<span data-bind="text: compareInvoicePoTitle()"></span>
							<!-- ko if: invoicePoViewName() == 'po' -->
							<!--PO # <span data-bind="text: selectedPONumber()"></span>; <span data-bind="text: selectedPOAllItems().length"></span> item(s); Total: <span data-bind="text: formatCurrency(selectedPOTotal())"></span>;-->
							<!-- /ko -->
							
							<!-- ko if: invoicePoViewName() == 'invoice' -->
							<!-- /ko -->
						</h4>
					</div>
					<div class="modal-body" style="padding:0 15px;">
						<!-- PO Details View -->
						<div style="display:block;" data-bind="visible: invoicePoViewName() == 'po'">
							<div style="display: block;">
								<input style="height:24px;margin-bottom:10px;margin-top:10px;width:400px;" type="text" class="form-control input-sm" id="" placeholder="Search for ..." data-bind="textinput: selectedPOItemSearch" />
							</div>

							<hr style="margin: 0px -15px;" />
							<div class="row" style="font-weight:bold;">
								<div class="col-xs-12 text-center">
									PO#:&nbsp;<span data-bind="text: selectedPONumber()"></span>;&nbsp;
									<span data-bind="text: selectedPOAllItems().length"></span>&nbsp;Item(s);&nbsp;
									Total:&nbsp;<span data-bind="text: formatCurrency(selectedPOTotal())"></span>;&nbsp;
								</div>
							</div>
							<hr style="margin: 0px -15px;" />

							<div class="row" style="margin:0;">
								<div class="col-xs-12 " style="padding-left:2px; padding-right:2px;">
									<div id="itemSearchResult" class="" style="width:100%;">
										<div class="row" style="margin:0; display:block; overflow-x:hidden;">
											<table class="cm-table table table-condensed " style="margin:0;font-size:12px;">
												<thead>
													<tr>
														<th style="padding-left: 0;">ITEM</th>
														<th class="col-w-b30-2" style="text-align:center;padding-left: 0;">ITEM ID</th>
														<th class="col-w-b30-5" style="text-align:center;">BRAND</th>
														<th class="col-w-b30-3" style="text-align:center;padding-left: 0;">UOM</th>
														<th class="col-w-b30-2" style="text-align:center;padding-left: 0;">QTY</th>
														<th class="col-w-b30-2" style="text-align:center;padding-left: 0;">UNIT</th>
														<th class="col-w-b30-2" style="text-align:center;">CWT</th>
														<th class="col-w-b30-3" style="text-align:right;padding-right: 0;">PRICE</th>
														<th class="col-w-b30-3" style="text-align:right;padding-right: 0;">EXT.</th>
														<th style="width:17px;padding:0;"></th>
													</tr>
												</thead>
											</table>
										</div>
										<div class="row" style="height:400px; overflow-y:scroll; margin-left:0; margin-right:0;">
											<table class="cm-table table table-condensed table-hover">
												<tbody data-bind="foreach: selectedPOFilteredItems">
													<tr>
														<td style="padding:0 !important;" data-bind="text: Description"></td>
														<td class="col-w-b30-2" style="padding:0 !important;text-align:center;" data-bind="text: ItemId"></td>
														<td class="col-w-b30-5" style="padding:0 !important;text-align:center;" data-bind="text: Brand"></td>
														<td class="col-w-b30-3" style="padding:0 !important;text-align:center;" data-bind="text: UOM"></td>
														<td class="col-w-b30-2" style="padding:0 !important;text-align:center;" data-bind="text: formatToFixed(Quantity, 0)"></td>
														<td class="col-w-b30-2" style="padding:0 !important;text-align:center;" data-bind="text: Unit"></td>
														<td class="col-w-b30-2" style="padding:0 !important;text-align:center;" data-bind="text: formatToFixed(CWT, 0)"></td>
														<td class="col-w-b30-3" style="padding:0 !important;text-align:right;" data-bind="text: formatCurrency(UnitPrice)"></td>
														<td class="col-w-b30-3" style="padding:0 !important;text-align:right;" data-bind="text: formatCurrency(Ext)"></td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
															
						</div>
						<!-- /PO Details View -->
						
						<!-- Compare PO with Invoice View -->
						<div style="display:block;" data-bind="visible: invoicePoViewName() == 'invoice'">
							<div style="display: block;">
								<input style="height:24px;margin:10px 0px;width:800px;" type="text" class="form-control input-sm" id="" placeholder="Search for ..." data-bind="textInput: compareInvWithPOSearchFilter" />
							</div>

							<hr style="margin: 0px -15px;" />
							<div class="row" style="font-weight:bold;">
								<div class="col-xs-6 text-center" style="width:621px;border-right: 1px solid lightgray;">
									Invoice#:&nbsp;<span data-bind="text: selectedItem() == null ? '' : selectedItem().InvoiceNumber"></span>;&nbsp;
									<span data-bind="text: selectedItem() == null ? '' : invoiceAllItems().length"></span>&nbsp;Item(s);&nbsp;
									Total:&nbsp;<span data-bind="text: selectedItem() == null ? '' : formatCurrency(selectedItem().computedTotal())"></span>;&nbsp;
								</div>
								<div class="col-xs-5 text-center">
									PO#:&nbsp;<span data-bind="text: selectedPONumber()"></span>;&nbsp;
									<span data-bind="text: selectedPOAllItems().length"></span>&nbsp;Item(s);&nbsp;
									Total:&nbsp;<span data-bind="text: formatCurrency(selectedPOTotal())"></span>;&nbsp;
								</div>
							</div>
							<hr style="margin: 0px -15px;" />
							
							<div class="row">
								
								<div id="leftItemComparePane" class="col-xs-12" style="border-right:1px solid lightgray;padding-left:10px;padding-right:10px;">
									<div style="display:block;">
										<table class="table table-condensed table-striped cm-table" style="margin-bottom:0;">
											<thead style="display:block;">
												<tr>
													<!-- Invoices -->
													<th class="col-w-b30-2">Code</th>
													<th class="col-w-b30-2">Item Id</th>
													<th class="col-w-b30-6">Description</th>
													<th class="col-w-b30-2">Unit</th>
													<th class="col-w-b30-2" style="text-align:right;">Price Units</th>
													<th class="col-w-b30-2" style="text-align:right;">Price</th>
													<th class="col-w-b30-2" style="text-align:right;">Qty</th>
													<th class="" style="width:70px; text-align:right; border-right: 1px solid lightgray;">Ext</th>
													<!-- POs -->
													<th class="col-w-b30-2">Item Id</th>
													<th class="col-w-b30-6">Description</th>
													<th class="col-w-b30-2">Unit</th>
													<th class="col-w-b30-2" style="text-align:right;">Price Units</th>
													<th class="col-w-b30-2" style="text-align:right;">Price</th>
													<th class="col-w-b30-2" style="text-align:right;">Qty</th>
													<th class="" style="width:70px; text-align:right;">Ext</th>
													<th class="col-w-scroll-17"></th>
												</tr>
											</thead>
											<tbody data-bind="foreach: compareInvWithPOFilteredItems" style="display:block;height:383px;overflow-x:hidden; overflow-y:scroll;">
												<tr data-bind="attr: {'data-row-index': $index()}" onmouseover="showElements3(this)" onmouseout="hideElements3(this)">
													<!-- Invoices -->
													<td class="col-w-b30-2" data-bind="text: ellipsesAfterNthCharacter(VendItemCode, 6), attr: {title: VendItemCode}"></td>
													<td class="col-w-b30-2" data-bind="text: ItemId"></td>
													<td class="col-w-b30-6 text-nowrap" style="max-width:180px;text-overflow:clip;" data-bind="html: ellipsesAfterNthCharacter(Description, 20)"></td>
													<td class="col-w-b30-2" data-bind="text: Unit"></td>
													<td class="col-w-b30-2" style="text-align:right;" data-bind="text: formatToFixed0(TotalPriceUnits, 2)"></td>
													<td class="col-w-b30-2" style="text-align:right;" data-bind="text: formatCurrency(UnitPrice)"></td>
													<td class="col-w-b30-2" style="text-align:right;" data-bind="text: formatToFixed0(Quantity, 2)"></td>
													<td class="" style="width:70px; text-align:right; border-right: 1px solid lightgray;" data-bind="text: formatCurrency(Ext)"></td>
													<!-- POs -->
													<td class="col-w-b30-2" data-bind="text: ItemId2"></td>
													<td class="col-w-b30-6 text-nowrap" style="max-width:180px;text-overflow:clip;" data-bind="html: ellipsesAfterNthCharacter(Description2, 20)"></td>
													<td class="col-w-b30-2" data-bind="text: Unit2"></td>
													<td class="col-w-b30-2" style="text-align:right;" data-bind="text: formatToFixed0(PriceUnits, 2)"></td>
													<td class="col-w-b30-2" style="text-align:right;" data-bind="text: formatCurrency(UnitPrice2)"></td>
													<td class="col-w-b30-2" style="text-align:right;" data-bind="text: formatToFixed0(Quantity2, 2)"></td>
													<td style="width:70px;text-align:right;" data-bind="text: formatCurrency(Ext2)"></td>
												</tr>
											</tbody>
										</table>
										<!--<pre data-bind="text: ko.toJSON(fnc.eInvoicesApp.compareInvoiceItems(), null, 2)"></pre>-->
									</div>
								</div>
								<!-- /Invoices -->

							</div>
						</div>
						<!-- /Compare PO with Invoice View -->
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-bind="click: toggleInoicePoView"><span data-bind="text: btnToggleInvPoCaption"></span></button>
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
	
	</div>

</body>
</html>
